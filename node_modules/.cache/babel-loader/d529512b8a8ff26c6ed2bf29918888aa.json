{"ast":null,"code":"import _classCallCheck from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import\"./schedule.css\";import loadingImage from\"../media/loading.gif\";var Schedule=/*#__PURE__*/function(_React$Component){_inherits(Schedule,_React$Component);var _super=_createSuper(Schedule);function Schedule(props){var _this;_classCallCheck(this,Schedule);_this=_super.call(this,props);_this.monthNames=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];_this.weekNames=[{name:\"Sunday\",short:\"S\"},{name:\"Monday\",short:\"M\"},{name:\"Tuesday\",short:\"T\"},{name:\"Wednesday\",short:\"W\"},{name:\"Thursday\",short:\"T\"},{name:\"Friday\",short:\"F\"},{name:\"Saturday\",short:\"S\"}];_this.loadMonth=function(isDefaultWeek){var today=new Date();var monthFirst=new Date(_this.state.currentMonth.getFullYear(),_this.state.currentMonth.getMonth(),1);var calendarFirst=monthFirst;calendarFirst=new Date(calendarFirst.setDate(calendarFirst.getDate()-calendarFirst.getDay()-1));var monthLast=new Date(_this.state.currentMonth.getFullYear(),_this.state.currentMonth.getMonth()+1,1);monthLast=new Date(monthLast.setDate(monthLast.getDate()-1));var calendarLast=monthLast;calendarLast=new Date(calendarLast.setDate(calendarLast.getDate()+(6-calendarLast.getDay())));var weeks=Math.ceil((calendarLast-calendarFirst)/1000/60/60/24/7);var calendar=Array.from({length:weeks},function(item,index){return Array.from({length:7},function(item,index){return new Date(calendarFirst.setDate(calendarFirst.getDate()+1));});});calendar=calendar.map(function(week){return{days:week.map(function(date){return{day:date,isToday:date.getFullYear()===today.getFullYear()&&date.getMonth()===today.getMonth()&&date.getDate()===today.getDate()};}),isSelected:_this.state.selectedWeek};});_this.setState({calendar:calendar},function(){return _this.setState({selectedWeek:_this.state.calendar.findIndex(function(week){return week.days.some(function(day){return day.isToday;});})});});};_this.changeMonth=function(change){return function(event){var updateDate=_this.state.currentMonth;updateDate=new Date(updateDate.setMonth(updateDate.getMonth()+change));_this.setState({currentMonth:updateDate});_this.loadMonth();};};_this.selectWeek=function(weekIndex){return function(event){_this.setState({selectedWeek:weekIndex});};};_this.state={isLoading:false,//true\ncurrentMonth:new Date(),selectedWeek:0,calendar:[]};return _this;}_createClass(Schedule,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadMonth(true);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"page schedulePage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Schedule\"}),this.state.isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"Loading\",src:loadingImage}),/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row monthHeader\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button\",onClick:this.changeMonth(-1),children:\"<\"}),/*#__PURE__*/_jsx(\"div\",{children:this.monthNames[this.state.currentMonth.getMonth()]+\" \"+this.state.currentMonth.getFullYear()}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",onClick:this.changeMonth(1),children:\">\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row week\",children:this.weekNames.map(function(day,dayIndex){return/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:day.short},dayIndex);})}),this.state.calendar.map(function(week,weekIndex){return/*#__PURE__*/_jsx(\"div\",{className:\"row week \".concat(weekIndex===_this2.state.selectedWeek?\"weekHighlight\":\"\"),onClick:_this2.selectWeek(weekIndex),children:week.days.map(function(date,dateIndex){return/*#__PURE__*/_jsx(\"div\",{className:\"date \".concat(date.isToday?\"today\":\"\",\" \").concat(weekIndex===_this2.state.selectedWeek&&(dateIndex===0||dateIndex===6)?\"weekKey\":\"\"),children:date.day.getDate()},dateIndex);})},weekIndex);})]})]})]});}}]);return Schedule;}(React.Component);export default Schedule;","map":{"version":3,"sources":["/home/bvanbeynum/workout/client/src/components/Schedule.jsx"],"names":["React","loadingImage","Schedule","props","monthNames","weekNames","name","short","loadMonth","isDefaultWeek","today","Date","monthFirst","state","currentMonth","getFullYear","getMonth","calendarFirst","setDate","getDate","getDay","monthLast","calendarLast","weeks","Math","ceil","calendar","Array","from","length","item","index","map","week","days","date","day","isToday","isSelected","selectedWeek","setState","findIndex","some","changeMonth","change","event","updateDate","setMonth","selectWeek","weekIndex","isLoading","dayIndex","dateIndex","Component"],"mappings":"gqBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,gBAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,sBAAzB,C,GAEMC,CAAAA,Q,gHAIL,kBAAYC,KAAZ,CAAmB,0CAClB,uBAAMA,KAAN,EADkB,MAHnBC,UAGmB,CAHN,CAAC,SAAD,CAAY,UAAZ,CAAwB,OAAxB,CAAiC,OAAjC,CAA0C,KAA1C,CAAiD,MAAjD,CAAyD,MAAzD,CAAiE,QAAjE,CAA2E,WAA3E,CAAwF,SAAxF,CAAmG,UAAnG,CAA+G,UAA/G,CAGM,OAFnBC,SAEmB,CAFP,CAAC,CAACC,IAAI,CAAE,QAAP,CAAiBC,KAAK,CAAE,GAAxB,CAAD,CAA+B,CAACD,IAAI,CAAE,QAAP,CAAiBC,KAAK,CAAE,GAAxB,CAA/B,CAA6D,CAACD,IAAI,CAAE,SAAP,CAAkBC,KAAK,CAAE,GAAzB,CAA7D,CAA4F,CAACD,IAAI,CAAE,WAAP,CAAoBC,KAAK,CAAE,GAA3B,CAA5F,CAA6H,CAACD,IAAI,CAAE,UAAP,CAAmBC,KAAK,CAAE,GAA1B,CAA7H,CAA6J,CAACD,IAAI,CAAE,QAAP,CAAiBC,KAAK,CAAE,GAAxB,CAA7J,CAA2L,CAACD,IAAI,CAAE,UAAP,CAAmBC,KAAK,CAAE,GAA1B,CAA3L,CAEO,OAgBnBC,SAhBmB,CAgBP,SAAAC,aAAa,CAAI,CAC5B,GAAMC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,IAAJ,EAAd,CAEA,GAAMC,CAAAA,UAAU,CAAG,GAAID,CAAAA,IAAJ,CAAS,MAAKE,KAAL,CAAWC,YAAX,CAAwBC,WAAxB,EAAT,CAAgD,MAAKF,KAAL,CAAWC,YAAX,CAAwBE,QAAxB,EAAhD,CAAoF,CAApF,CAAnB,CACA,GAAIC,CAAAA,aAAa,CAAGL,UAApB,CACAK,aAAa,CAAG,GAAIN,CAAAA,IAAJ,CAASM,aAAa,CAACC,OAAd,CAAsBD,aAAa,CAACE,OAAd,GAA0BF,aAAa,CAACG,MAAd,EAA1B,CAAmD,CAAzE,CAAT,CAAhB,CAEA,GAAIC,CAAAA,SAAS,CAAG,GAAIV,CAAAA,IAAJ,CAAS,MAAKE,KAAL,CAAWC,YAAX,CAAwBC,WAAxB,EAAT,CAAgD,MAAKF,KAAL,CAAWC,YAAX,CAAwBE,QAAxB,GAAqC,CAArF,CAAwF,CAAxF,CAAhB,CACAK,SAAS,CAAG,GAAIV,CAAAA,IAAJ,CAASU,SAAS,CAACH,OAAV,CAAkBG,SAAS,CAACF,OAAV,GAAsB,CAAxC,CAAT,CAAZ,CACA,GAAIG,CAAAA,YAAY,CAAGD,SAAnB,CACAC,YAAY,CAAG,GAAIX,CAAAA,IAAJ,CAASW,YAAY,CAACJ,OAAb,CAAqBI,YAAY,CAACH,OAAb,IAA0B,EAAIG,YAAY,CAACF,MAAb,EAA9B,CAArB,CAAT,CAAf,CAEA,GAAMG,CAAAA,KAAK,CAAGC,IAAI,CAACC,IAAL,CAAU,CAACH,YAAY,CAAGL,aAAhB,EAAiC,IAAjC,CAAwC,EAAxC,CAA6C,EAA7C,CAAkD,EAAlD,CAAuD,CAAjE,CAAd,CAEA,GAAIS,CAAAA,QAAQ,CAAGC,KAAK,CAACC,IAAN,CAAW,CAACC,MAAM,CAAEN,KAAT,CAAX,CAA4B,SAACO,IAAD,CAAOC,KAAP,QAC1CJ,CAAAA,KAAK,CAACC,IAAN,CAAW,CAACC,MAAM,CAAE,CAAT,CAAX,CAAwB,SAACC,IAAD,CAAOC,KAAP,QAAiB,IAAIpB,CAAAA,IAAJ,CAASM,aAAa,CAACC,OAAd,CAAsBD,aAAa,CAACE,OAAd,GAA0B,CAAhD,CAAT,CAAjB,EAAxB,CAD0C,EAA5B,CAAf,CAIAO,QAAQ,CAAGA,QAAQ,CAACM,GAAT,CAAa,SAAAC,IAAI,QAAK,CAChCC,IAAI,CAAED,IAAI,CAACD,GAAL,CAAS,SAAAG,IAAI,QAAK,CAAEC,GAAG,CAAED,IAAP,CAAaE,OAAO,CAAEF,IAAI,CAACpB,WAAL,KAAuBL,KAAK,CAACK,WAAN,EAAvB,EAA8CoB,IAAI,CAACnB,QAAL,KAAoBN,KAAK,CAACM,QAAN,EAAlE,EAAsFmB,IAAI,CAAChB,OAAL,KAAmBT,KAAK,CAACS,OAAN,EAA/H,CAAL,EAAb,CAD0B,CAEhCmB,UAAU,CAAE,MAAKzB,KAAL,CAAW0B,YAFS,CAAL,EAAjB,CAAX,CAKA,MAAKC,QAAL,CAAc,CACbd,QAAQ,CAAEA,QADG,CAAd,CAGA,iBAAM,OAAKc,QAAL,CAAc,CAAED,YAAY,CAAE,MAAK1B,KAAL,CAAWa,QAAX,CAAoBe,SAApB,CAA8B,SAAAR,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAL,CAAUQ,IAAV,CAAe,SAAAN,GAAG,QAAIA,CAAAA,GAAG,CAACC,OAAR,EAAlB,CAAJ,EAAlC,CAAhB,CAAd,CAAN,EAHA,EAKA,CA5CkB,OA8CnBM,WA9CmB,CA8CL,SAAAC,MAAM,QAAI,UAAAC,KAAK,CAAI,CAChC,GAAIC,CAAAA,UAAU,CAAG,MAAKjC,KAAL,CAAWC,YAA5B,CACAgC,UAAU,CAAG,GAAInC,CAAAA,IAAJ,CAASmC,UAAU,CAACC,QAAX,CAAoBD,UAAU,CAAC9B,QAAX,GAAwB4B,MAA5C,CAAT,CAAb,CAEA,MAAKJ,QAAL,CAAc,CAAC1B,YAAY,CAAEgC,UAAf,CAAd,EACA,MAAKtC,SAAL,GACA,CANmB,EA9CD,OAsDnBwC,UAtDmB,CAsDN,SAAAC,SAAS,QAAI,UAAAJ,KAAK,CAAI,CAClC,MAAKL,QAAL,CAAc,CAACD,YAAY,CAAEU,SAAf,CAAd,EACA,CAFqB,EAtDH,CAGlB,MAAKpC,KAAL,CAAa,CACZqC,SAAS,CAAE,KADC,CACM;AAClBpC,YAAY,CAAE,GAAIH,CAAAA,IAAJ,EAFF,CAGZ4B,YAAY,CAAE,CAHF,CAIZb,QAAQ,CAAE,EAJE,CAAb,CAHkB,aAUlB,C,kFAEmB,CACnB,KAAKlB,SAAL,CAAe,IAAf,EACA,C,uCA4CQ,iBACR,mBACC,aAAK,SAAS,CAAC,mBAAf,wBACC,gCADD,CAIC,KAAKK,KAAL,CAAWqC,SAAX,cACA,aAAK,SAAS,CAAC,SAAf,wBACC,YAAK,GAAG,CAAC,SAAT,CAAmB,GAAG,CAAEjD,YAAxB,EADD,cAEC,mCAFD,GADA,cAMA,oCACC,aAAK,SAAS,CAAC,iBAAf,wBACC,YAAK,SAAS,CAAC,QAAf,CAAwB,OAAO,CAAE,KAAK0C,WAAL,CAAiB,CAAC,CAAlB,CAAjC,eADD,cAEC,qBAAO,KAAKvC,UAAL,CAAgB,KAAKS,KAAL,CAAWC,YAAX,CAAwBE,QAAxB,EAAhB,EAAsD,GAAtD,CAA4D,KAAKH,KAAL,CAAWC,YAAX,CAAwBC,WAAxB,EAAnE,EAFD,cAGC,YAAK,SAAS,CAAC,QAAf,CAAwB,OAAO,CAAE,KAAK4B,WAAL,CAAiB,CAAjB,CAAjC,eAHD,GADD,cAOC,aAAK,SAAS,CAAC,UAAf,wBACC,YAAK,SAAS,CAAC,UAAf,UAEC,KAAKtC,SAAL,CAAe2B,GAAf,CAAmB,SAACI,GAAD,CAAMe,QAAN,qBACnB,YAAoB,SAAS,CAAC,MAA9B,UAAsCf,GAAG,CAAC7B,KAA1C,EAAU4C,QAAV,CADmB,EAAnB,CAFD,EADD,CAUC,KAAKtC,KAAL,CAAWa,QAAX,CAAoBM,GAApB,CAAwB,SAACC,IAAD,CAAOgB,SAAP,qBACxB,YAAqB,SAAS,oBAAeA,SAAS,GAAK,MAAI,CAACpC,KAAL,CAAW0B,YAAzB,CAAwC,eAAxC,CAA0D,EAAzE,CAA9B,CAA8G,OAAO,CAAE,MAAI,CAACS,UAAL,CAAgBC,SAAhB,CAAvH,UAEChB,IAAI,CAACC,IAAL,CAAUF,GAAV,CAAc,SAACG,IAAD,CAAOiB,SAAP,qBACd,YAAqB,SAAS,gBAAUjB,IAAI,CAACE,OAAL,CAAe,OAAf,CAAyB,EAAnC,aAAyCY,SAAS,GAAK,MAAI,CAACpC,KAAL,CAAW0B,YAAzB,GAA0Ca,SAAS,GAAK,CAAd,EAAmBA,SAAS,GAAK,CAA3E,EAAgF,SAAhF,CAA4F,EAArI,CAA9B,UACEjB,IAAI,CAACC,GAAL,CAASjB,OAAT,EADF,EAAUiC,SAAV,CADc,EAAd,CAFD,EAAUH,SAAV,CADwB,EAAxB,CAVD,GAPD,GAVD,GADD,CA8CA,C,sBA7GqBjD,KAAK,CAACqD,S,EA+G7B,cAAenD,CAAAA,QAAf","sourcesContent":["import React from \"react\";\nimport \"./schedule.css\";\nimport loadingImage from \"../media/loading.gif\";\n\nclass Schedule extends React.Component {\n\tmonthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\tweekNames = [{name: \"Sunday\", short: \"S\"}, {name: \"Monday\", short: \"M\"}, {name: \"Tuesday\", short: \"T\"}, {name: \"Wednesday\", short: \"W\"}, {name: \"Thursday\", short: \"T\"}, {name: \"Friday\", short: \"F\"}, {name: \"Saturday\", short: \"S\"}];\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.state = {\n\t\t\tisLoading: false, //true\n\t\t\tcurrentMonth: new Date(),\n\t\t\tselectedWeek: 0,\n\t\t\tcalendar: []\n\t\t};\n\t\t\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.loadMonth(true);\n\t}\n\t\n\tloadMonth = isDefaultWeek => {\n\t\tconst today = new Date();\n\t\t\n\t\tconst monthFirst = new Date(this.state.currentMonth.getFullYear(), this.state.currentMonth.getMonth(), 1);\n\t\tlet calendarFirst = monthFirst;\n\t\tcalendarFirst = new Date(calendarFirst.setDate(calendarFirst.getDate() - calendarFirst.getDay() - 1));\n\t\t\n\t\tlet monthLast = new Date(this.state.currentMonth.getFullYear(), this.state.currentMonth.getMonth() + 1, 1);\n\t\tmonthLast = new Date(monthLast.setDate(monthLast.getDate() - 1));\n\t\tlet calendarLast = monthLast;\n\t\tcalendarLast = new Date(calendarLast.setDate(calendarLast.getDate() + (6 - calendarLast.getDay())));\n\t\t\n\t\tconst weeks = Math.ceil((calendarLast - calendarFirst) / 1000 / 60 / 60 / 24 / 7);\n\t\t\n\t\tlet calendar = Array.from({length: weeks}, (item, index) => \n\t\t\tArray.from({length: 7}, (item, index) => new Date(calendarFirst.setDate(calendarFirst.getDate() + 1)) )\n\t\t\t);\n\t\t\n\t\tcalendar = calendar.map(week => ({\n\t\t\tdays: week.map(date => ({ day: date, isToday: date.getFullYear() === today.getFullYear() && date.getMonth() === today.getMonth() && date.getDate() === today.getDate() }) ),\n\t\t\tisSelected: this.state.selectedWeek\n\t\t}));\n\t\t\n\t\tthis.setState({ \n\t\t\tcalendar: calendar \n\t\t},\n\t\t() => this.setState({ selectedWeek: this.state.calendar.findIndex(week => week.days.some(day => day.isToday)) })\n\t\t);\n\t}\n\t\n\tchangeMonth = change => event => {\n\t\tlet updateDate = this.state.currentMonth;\n\t\tupdateDate = new Date(updateDate.setMonth(updateDate.getMonth() + change));\n\t\t\n\t\tthis.setState({currentMonth: updateDate});\n\t\tthis.loadMonth();\n\t}\n\t\n\tselectWeek = weekIndex => event => {\n\t\tthis.setState({selectedWeek: weekIndex});\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"page schedulePage\">\n\t\t\t\t<h1>Schedule</h1>\n\t\t\t\t\n\t\t\t\t{\n\t\t\t\tthis.state.isLoading ?\n\t\t\t\t<div className=\"loading\">\n\t\t\t\t\t<img alt=\"Loading\" src={loadingImage} />\n\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"row monthHeader\">\n\t\t\t\t\t\t<div className=\"button\" onClick={this.changeMonth(-1)}>&lt;</div>\n\t\t\t\t\t\t<div>{ this.monthNames[this.state.currentMonth.getMonth()] + \" \" + this.state.currentMonth.getFullYear() }</div>\n\t\t\t\t\t\t<div className=\"button\" onClick={this.changeMonth(1)}>&gt;</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"calendar\">\n\t\t\t\t\t\t<div className=\"row week\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.weekNames.map((day, dayIndex) => (\n\t\t\t\t\t\t\t<div key={dayIndex} className=\"date\">{day.short}</div>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.calendar.map((week, weekIndex) => (\n\t\t\t\t\t\t<div key={weekIndex} className={`row week ${ weekIndex === this.state.selectedWeek ? \"weekHighlight\" : \"\" }`} onClick={this.selectWeek(weekIndex)}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tweek.days.map((date, dateIndex) => (\n\t\t\t\t\t\t\t<div key={dateIndex} className={`date ${date.isToday ? \"today\" : \"\"} ${weekIndex === this.state.selectedWeek && (dateIndex === 0 || dateIndex === 6) ? \"weekKey\" : \"\" }`}>\n\t\t\t\t\t\t\t\t{date.day.getDate()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Schedule;\n"]},"metadata":{},"sourceType":"module"}