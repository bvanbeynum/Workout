{"ast":null,"code":"import _objectSpread from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/bvanbeynum/workout/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// eslint-disable-next-line\n/* global fetch */import React from\"react\";import\"./home.css\";import loadingImage from\"../media/loading.gif\";var Home=/*#__PURE__*/function(_React$Component){_inherits(Home,_React$Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.viewWorkout=function(workoutIndex){return function(event){_this.setState(function(_ref){var workouts=_ref.workouts;return{workouts:workouts.map(function(workout,index){return _objectSpread(_objectSpread({},workout),{},{isVisible:index===workoutIndex?!workout.isVisible:false});})};});};};_this.state={workouts:[],palette:[{highlight:\"rgb(7 169 241)\",background:\"rgb(202 236 251)\"},{highlight:\"rgb(204 110 226)\",background:\"rgb(236 214 243)\"},{highlight:\"rgb(30 192 194)\",background:\"rgb(206 240 240)\"},{highlight:\"rgb(238 69 105)\",background:\"rgb(251 216 223)\"}],user:props.user,isLoading:true};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"http://workout.beynum.com/workout/api/homeload\",{credentials:\"include\"}).then(function(response){return response.json();}).then(function(data){var weeks=new Array(4).fill({}).map(function(item,index){var week=new Date();week.setHours(0,0,0,0);week.setDate(week.getDate()-week.getDay()-index*7);return week;}).sort(function(weekA,weekB){return weekB-weekA;});var workouts=data.workouts.map(function(workout,workoutIndex){return _objectSpread(_objectSpread({},workout),{},{color:_this2.state.palette[workoutIndex%_this2.state.palette.length],isVisible:false,lastRun:workout.activities.map(function(activity){return new Date(activity);}).sort(function(activityA,activityB){return activityB-activityA;})[0]||null,activityWeeks:weeks.map(function(week,weekIndex,weekArray){return{week:week.getMonth()+1+\"/\"+week.getDate(),days:Array(7).fill({}).map(function(day,dayIndex){var today=new Date();today.setHours(0,0,0,0);day=new Date(week);day.setDate(day.getDate()+dayIndex);return{day:day,isToday:+day===+today,didWorkout:workout.activities.some(function(activity){var activityDate=new Date(activity);activityDate.setHours(0,0,0,0);return+activityDate===+day;})};})};})});}).sort(function(workoutA,workoutB){return workoutB.lastRun-workoutA.lastRun;});workouts=workouts.map(function(workout){return _objectSpread(_objectSpread({},workout),{},{lastRunDisplay:workout.lastRun?Math.ceil((new Date()-workout.lastRun)/(1000*60*60*24))+\" day(s) ago\":\"N/A\"});});_this2.setState({isLoading:false,workouts:workouts});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome \",this.state.user.firstName]}),this.state.isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"Loading\",src:loadingImage}),/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"workoutsContainer\",children:this.state.workouts.map(function(workout,workoutIndex){return/*#__PURE__*/_jsxs(\"div\",{className:\"workoutContainer\",style:{borderColor:workout.color.highlight,boxShadow:\"0px 1px 3px 1px \"+workout.color.background},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"headerContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"itemBar\",style:{backgroundColor:workout.color.highlight}}),/*#__PURE__*/_jsxs(\"div\",{className:\"dataContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"workoutHeader\",children:workout.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"workoutSubHeader\",children:[\"Sets: \",workout.setCount,\" \\u2022 Last: \",workout.lastRunDisplay]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actionButton\",onClick:_this3.viewWorkout(workoutIndex),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",width:\"24px\",height:\"24px\",style:{fill:workout.color.highlight},children:/*#__PURE__*/_jsx(\"path\",{d:\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"actionButton\",onClick:_this3.props.startWorkout.bind(_this3,workout.id),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",width:\"24px\",height:\"24px\",style:{fill:workout.color.highlight},children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 5v14l11-7z\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detailContainer \".concat(workout.isVisible?\"active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"exerciseTable\",style:{color:workout.color.highlight,backgroundColor:workout.color.background},children:workout.exercises.map(function(exercise,exerciseIndex){return/*#__PURE__*/_jsxs(\"div\",{children:[exerciseIndex+1,\". \",exercise]},exerciseIndex);})}),/*#__PURE__*/_jsx(\"table\",{className:\"scheduleTable\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"S\"}),/*#__PURE__*/_jsx(\"th\",{children:\"M\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\"}),/*#__PURE__*/_jsx(\"th\",{children:\"W\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\"}),/*#__PURE__*/_jsx(\"th\",{children:\"F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"S\"})]}),workout.activityWeeks.map(function(week,weekIndex){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:week.week}),week.days.map(function(day,dayIndex){return/*#__PURE__*/_jsx(\"td\",{style:{color:workout.color.highlight},children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(day.isToday?\"today\":\"\"),style:{backgroundColor:day.isToday?workout.color.highlight:null},children:day.didWorkout?\"•\":\"\"})},dayIndex);})]},weekIndex);})]})})]})]},workoutIndex);})})]});}}]);return Home;}(React.Component);export default Home;","map":{"version":3,"sources":["/home/bvanbeynum/workout/client/src/components/Home.jsx"],"names":["React","loadingImage","Home","props","viewWorkout","workoutIndex","event","setState","workouts","map","workout","index","isVisible","state","palette","highlight","background","user","isLoading","fetch","credentials","then","response","json","data","weeks","Array","fill","item","week","Date","setHours","setDate","getDate","getDay","sort","weekA","weekB","color","length","lastRun","activities","activity","activityA","activityB","activityWeeks","weekIndex","weekArray","getMonth","days","day","dayIndex","today","isToday","didWorkout","some","activityDate","workoutA","workoutB","lastRunDisplay","Math","ceil","firstName","borderColor","boxShadow","backgroundColor","name","setCount","startWorkout","bind","id","exercises","exercise","exerciseIndex","Component"],"mappings":"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","sourcesContent":["// eslint-disable-next-line\n/* global fetch */\n\nimport React from \"react\";\nimport \"./home.css\";\nimport loadingImage from \"../media/loading.gif\";\n\nclass Home extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.state = {\n\t\t\tworkouts: [],\n\t\t\tpalette: [\n\t\t\t{\n\t\t\t\thighlight: \"rgb(7 169 241)\",\n\t\t\t\tbackground: \"rgb(202 236 251)\"\n\t\t\t},\n\t\t\t{\n\t\t\t\thighlight: \"rgb(204 110 226)\",\n\t\t\t\tbackground: \"rgb(236 214 243)\"\n\t\t\t},\n\t\t\t{\n\t\t\t\thighlight: \"rgb(30 192 194)\",\n\t\t\t\tbackground: \"rgb(206 240 240)\"\n\t\t\t},\n\t\t\t{\n\t\t\t\thighlight: \"rgb(238 69 105)\",\n\t\t\t\tbackground: \"rgb(251 216 223)\"\n\t\t\t}],\n\t\t\tuser: props.user,\n\t\t\tisLoading: true\n\t\t};\n\t}\n\t\n\tcomponentDidMount() {\n\t\tfetch(\"http://workout.beynum.com/workout/api/homeload\", { credentials: \"include\" })\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t\n\t\t\t\tconst weeks = (new Array(4))\n\t\t\t\t\t.fill({ })\n\t\t\t\t\t.map((item, index) => {\n\t\t\t\t\t\tlet week = new Date();\n\t\t\t\t\t\tweek.setHours(0,0,0,0);\n\t\t\t\t\t\tweek.setDate(week.getDate() - week.getDay() - (index * 7));\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn week;\n\t\t\t\t\t})\n\t\t\t\t\t.sort((weekA, weekB) => weekB - weekA);\n\t\t\t\t\n\t\t\t\tlet workouts = data.workouts\n\t\t\t\t\t.map((workout, workoutIndex) => ({\n\t\t\t\t\t\t...workout,\n\t\t\t\t\t\tcolor: this.state.palette[workoutIndex % this.state.palette.length],\n\t\t\t\t\t\tisVisible: false,\n\t\t\t\t\t\tlastRun: workout.activities.map(activity => new Date(activity)).sort((activityA,activityB) => activityB - activityA)[0] || null,\n\t\t\t\t\t\tactivityWeeks: weeks.map((week, weekIndex, weekArray) => ({\n\t\t\t\t\t\t\tweek: (week.getMonth() + 1) + \"/\" + week.getDate(),\n\t\t\t\t\t\t\tdays: Array(7).fill({ }).map((day, dayIndex) => {\n\t\t\t\t\t\t\t\tconst today = new Date();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ttoday.setHours(0,0,0,0);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tday = new Date(week);\n\t\t\t\t\t\t\t\tday.setDate(day.getDate() + dayIndex);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tday: day,\n\t\t\t\t\t\t\t\t\tisToday: +day === +today,\n\t\t\t\t\t\t\t\t\tdidWorkout: workout.activities.some(activity => {\n\t\t\t\t\t\t\t\t\t\t\tconst activityDate = new Date(activity);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tactivityDate.setHours(0,0,0,0);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\treturn +activityDate === +day;\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t}))\n\t\t\t\t\t.sort((workoutA, workoutB) => workoutB.lastRun - workoutA.lastRun);\n\t\t\t\t\n\t\t\t\tworkouts = workouts.map(workout => ({\n\t\t\t\t\t...workout,\n\t\t\t\t\tlastRunDisplay: workout.lastRun ? Math.ceil(((new Date()) - workout.lastRun) / (1000 * 60 * 60 * 24)) + \" day(s) ago\" : \"N/A\"\n\t\t\t\t}));\n\t\t\t\t\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false,\n\t\t\t\t\tworkouts: workouts\n\t\t\t\t});\n\t\t\t\t\n\t\t\t});\n\t}\n\t\n\tviewWorkout = workoutIndex => event => {\n\t\t\n\t\tthis.setState(({workouts}) => ({\n\t\t\tworkouts: workouts.map((workout, index) => ({ ...workout, isVisible: index === workoutIndex ? !workout.isVisible : false }))\n\t\t}));\n\t\t\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"page\">\n\t\t\t\t<h1>Welcome { this.state.user.firstName }</h1>\n\t\t\t\t\n\t\t\t\t{\n\t\t\t\tthis.state.isLoading ?\n\t\t\t\t\t<div className=\"loading\">\n\t\t\t\t\t\t<img alt=\"Loading\" src={loadingImage} />\n\t\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t\t<div className=\"workoutsContainer\">\n\t\t\t\t\t\t\n\t\t\t\t\t{\n\t\t\t\t\tthis.state.workouts.map((workout, workoutIndex) => (\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div key={workoutIndex} className=\"workoutContainer\" style={{ borderColor: workout.color.highlight, boxShadow: \"0px 1px 3px 1px \" + workout.color.background }}>\n\t\t\t\t\t\t\t<div className=\"headerContainer\">\n\t\t\t\t\t\t\t\t<div className=\"itemBar\" style={{ backgroundColor: workout.color.highlight }}></div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div className=\"dataContainer\">\n\t\t\t\t\t\t\t\t\t<div className=\"workoutHeader\">{ workout.name }</div>\n\t\t\t\t\t\t\t\t\t<div className=\"workoutSubHeader\">\n\t\t\t\t\t\t\t\t\t\tSets: { workout.setCount } • Last: { workout.lastRunDisplay }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div className=\"actionButton\" onClick={ this.viewWorkout(workoutIndex) }>\n\t\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24px\" height=\"24px\" style={{ fill: workout.color.highlight }}>\n\t\t\t\t\t\t\t\t\t\t<path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div className=\"actionButton\" onClick={this.props.startWorkout.bind(this, workout.id)}>\n\t\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24px\" height=\"24px\" style={{ fill: workout.color.highlight }}>\n\t\t\t\t\t\t\t\t\t\t<path d=\"M8 5v14l11-7z\"/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className={`detailContainer ${ workout.isVisible ? \"active\" : \"\" }`}>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div className=\"exerciseTable\" style={{ color: workout.color.highlight, backgroundColor: workout.color.background }}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tworkout.exercises.map((exercise, exerciseIndex) => (\n\t\t\t\t\t\t\t\t\t<div key={ exerciseIndex }>{ exerciseIndex + 1 }. { exercise }</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<table className=\"scheduleTable\">\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t<th>S</th>\n\t\t\t\t\t\t\t\t\t<th>M</th>\n\t\t\t\t\t\t\t\t\t<th>T</th>\n\t\t\t\t\t\t\t\t\t<th>W</th>\n\t\t\t\t\t\t\t\t\t<th>T</th>\n\t\t\t\t\t\t\t\t\t<th>F</th>\n\t\t\t\t\t\t\t\t\t<th>S</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tworkout.activityWeeks.map((week, weekIndex) => (\n\t\t\t\t\t\t\t\t\t<tr key={ weekIndex }>\n\t\t\t\t\t\t\t\t\t\t<td>{ week.week }</td>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tweek.days.map((day, dayIndex) => (\n\t\t\t\t\t\t\t\t\t\t\t<td key={dayIndex} style={{ color: workout.color.highlight }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={`${ day.isToday ? \"today\" : \"\" }`} style={{ backgroundColor: day.isToday ? workout.color.highlight : null }}>{ day.didWorkout ? \"•\" : \"\" }</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}