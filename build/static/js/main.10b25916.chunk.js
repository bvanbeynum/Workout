(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,s){},19:function(e,t,s){},20:function(e,t,s){},21:function(e,t,s){},22:function(e,t,s){},23:function(e,t,s){},24:function(e,t,s){},25:function(e,t,s){},26:function(e,t,s){},27:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s(3),i=s.n(c),n=s(11),r=s.n(n),o=(s(18),s(4)),l=s(5),d=s(7),h=s(6),u=s(12),j=(s(19),function(e){var t=Object(c.useState)(""),s=Object(u.a)(t,2),i=s[0],n=s[1];return Object(a.jsxs)("div",{className:"loginPage",children:[Object(a.jsx)("div",{className:"icon",children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",fill:"black",children:Object(a.jsxs)("g",{children:[Object(a.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(a.jsx)("path",{d:"M12,1L3,5v6c0,5.55,3.84,10.74,9,12c5.16-1.26,9-6.45,9-12V5L12,1L12,1z M11,7h2v2h-2V7z M11,11h2v6h-2V11z"})]})})}),Object(a.jsx)("div",{className:"content",children:"This is a restricted site that requires pre-approval to use. If you'd like access to this site, you can request access using the button below. The request will be reviewed and approved if qualified."}),0===i.length?Object(a.jsx)("button",{onClick:function(){fetch("http://workout.beynum.com/workout/api/requestaccess",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){n("Access Requested")})).catch((function(t){console.warn(t),e.toast("Error processing request",!0)}))},children:"Request Access"}):null,Object(a.jsx)("div",{className:"update",children:i})]})}),A=(s(20),void 0),b=function(e){var t={fill:"rgb(245 81 28)"};return Object(a.jsxs)("div",{className:"navContainer",children:[Object(a.jsx)("div",{className:"item",onClick:e.changePage.bind(A,"home"),children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{style:t,d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})}),Object(a.jsx)("div",{className:"item",onClick:e.changePage.bind(A,"workout"),children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{style:t,d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),Object(a.jsx)("div",{className:"item",onClick:e.changePage.bind(A,"schedule"),children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{style:t,d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})})}),Object(a.jsx)("div",{className:"item",onClick:e.changePage.bind(A,"admin"),children:Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",children:[Object(a.jsx)("g",{children:Object(a.jsx)("rect",{fill:"none",height:"24",width:"24"})}),Object(a.jsx)("g",{children:Object(a.jsxs)("g",{children:[Object(a.jsx)("path",{style:t,d:"M17,11c0.34,0,0.67,0.04,1,0.09V6.27L10.5,3L3,6.27v4.91c0,4.54,3.2,8.79,7.5,9.82c0.55-0.13,1.08-0.32,1.6-0.55 C11.41,19.47,11,18.28,11,17C11,13.69,13.69,11,17,11z"}),Object(a.jsx)("path",{style:t,d:"M17,13c-2.21,0-4,1.79-4,4c0,2.21,1.79,4,4,4s4-1.79,4-4C21,14.79,19.21,13,17,13z M17,14.38c0.62,0,1.12,0.51,1.12,1.12 s-0.51,1.12-1.12,1.12s-1.12-0.51-1.12-1.12S16.38,14.38,17,14.38z M17,19.75c-0.93,0-1.74-0.46-2.24-1.17 c0.05-0.72,1.51-1.08,2.24-1.08s2.19,0.36,2.24,1.08C18.74,19.29,17.93,19.75,17,19.75z"})]})})]})})]})},v=s(1),m=(s(21),s.p+"static/media/loading.44436c81.gif"),O=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).viewWorkout=function(e){return function(t){a.setState((function(t){return{workouts:t.workouts.map((function(t,s){return Object(v.a)(Object(v.a)({},t),{},{isVisible:s===e&&!t.isVisible})}))}}))}},a.state={workouts:[],palette:[{highlight:"rgb(7 169 241)",background:"rgb(202 236 251)"},{highlight:"rgb(204 110 226)",background:"rgb(236 214 243)"},{highlight:"rgb(30 192 194)",background:"rgb(206 240 240)"},{highlight:"rgb(238 69 105)",background:"rgb(251 216 223)"}],user:e.user,isLoading:!0},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("http://workout.beynum.com/workout/api/homeload",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){var s=new Array(4).fill({}).map((function(e,t){var s=new Date;return s.setHours(0,0,0,0),s.setDate(s.getDate()-s.getDay()-7*t),s})).sort((function(e,t){return t-e})),a=t.workouts.map((function(t,a){return Object(v.a)(Object(v.a)({},t),{},{color:e.state.palette[a%e.state.palette.length],isVisible:!1,lastRun:t.activities.map((function(e){return new Date(e)})).sort((function(e,t){return t-e}))[0]||null,activityWeeks:s.map((function(e,s,a){return{week:e.getMonth()+1+"/"+e.getDate(),days:Array(7).fill({}).map((function(s,a){var c=new Date;return c.setHours(0,0,0,0),(s=new Date(e)).setDate(s.getDate()+a),{day:s,isToday:+s===+c,didWorkout:t.activities.some((function(e){var t=new Date(e);return t.setHours(0,0,0,0),+t===+s}))}}))}}))})})).sort((function(e,t){return t.lastRun-e.lastRun}));a=a.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{lastRunDisplay:e.lastRun?Math.ceil((new Date-e.lastRun)/864e5)+" day(s) ago":"N/A"})})),e.setState({isLoading:!1,workouts:a})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"page",children:[Object(a.jsxs)("h1",{children:["Welcome ",this.state.user.firstName]}),this.state.isLoading?Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("img",{alt:"Loading",src:m}),Object(a.jsx)("div",{children:"Loading..."})]}):Object(a.jsx)("div",{className:"workoutsContainer",children:this.state.workouts.map((function(t,s){return Object(a.jsxs)("div",{className:"workoutContainer",style:{borderColor:t.color.highlight,boxShadow:"0px 1px 3px 1px "+t.color.background},children:[Object(a.jsxs)("div",{className:"headerContainer",children:[Object(a.jsx)("div",{className:"itemBar",style:{backgroundColor:t.color.highlight}}),Object(a.jsxs)("div",{className:"dataContainer",children:[Object(a.jsx)("div",{className:"workoutHeader",children:t.name}),Object(a.jsxs)("div",{className:"workoutSubHeader",children:["Sets: ",t.setCount," \u2022 Last: ",t.lastRunDisplay]})]}),Object(a.jsx)("div",{className:"actionButton",onClick:e.viewWorkout(s),children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px",style:{fill:t.color.highlight},children:Object(a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})}),Object(a.jsx)("div",{className:"actionButton",onClick:e.props.startWorkout.bind(e,t.id),children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px",style:{fill:t.color.highlight},children:Object(a.jsx)("path",{d:"M8 5v14l11-7z"})})})]}),Object(a.jsxs)("div",{className:"detailContainer ".concat(t.isVisible?"active":""),children:[Object(a.jsx)("div",{className:"exerciseTable",style:{color:t.color.highlight,backgroundColor:t.color.background},children:t.exercises.map((function(e,t){return Object(a.jsxs)("div",{children:[t+1,". ",e]},t)}))}),Object(a.jsx)("table",{className:"scheduleTable",children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{}),Object(a.jsx)("th",{children:"S"}),Object(a.jsx)("th",{children:"M"}),Object(a.jsx)("th",{children:"T"}),Object(a.jsx)("th",{children:"W"}),Object(a.jsx)("th",{children:"T"}),Object(a.jsx)("th",{children:"F"}),Object(a.jsx)("th",{children:"S"})]}),t.activityWeeks.map((function(e,s){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.week}),e.days.map((function(e,s){return Object(a.jsx)("td",{style:{color:t.color.highlight},children:Object(a.jsx)("div",{className:"".concat(e.isToday?"today":""),style:{backgroundColor:e.isToday?t.color.highlight:null},children:e.didWorkout?"\u2022":""})},s)}))]},s)}))]})})]})]},s)}))})]})}}]),s}(i.a.Component),x=s(2),g=(s(22),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).getWeights=function(e,t){var s={};return e-=t.hasBar?45:0,s.has45=e>=90,e-=e>=90?90:0,s.has25=e>=50,e-=e>=50?50:0,s.has10=e>=20,e-=e>=20?20:0,s.has5=e>=10,e-=e>=10?10:0,s["has2.5"]=e>=5,e-=e>=5?5:0,s},a.selectWorkout=function(e){return function(t){a.setState((function(t){return{workouts:t.workouts.map((function(t,s){return Object(v.a)(Object(v.a)({},t),{},{isHidden:s!==e,isEdit:s===e})})),isEditMode:!0}}))}},a.addWorkout=function(e){var t={name:"New Workout"};fetch("http://workout.beynum.com/workout/api/workoutsave",{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({workout:t})}).then((function(e){return e.json()})).then((function(e){t.id=e.id,t.sets=[],a.setState((function(e){var s=e.workouts;return{workouts:[].concat(Object(x.a)(s),[t])}})),a.props.toast("Workout created")})).catch((function(e){console.warn(e),a.props.toast("Error adding workout",!0)}))},a.deleteWorkout=function(e){return function(t){fetch("http://workout.beynum.com/workout/api/workoutdelete?id="+a.state.workouts[e].id,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){a.setState((function(t){var s=t.workouts;return{workouts:[].concat(Object(x.a)(s.slice(0,e)),Object(x.a)(s.slice(e+1)))}})),a.props.toast("Workout deleted")})).catch((function(e){console.warn(e),a.props.toast("Error deleting workout",!0)}))}},a.saveWorkout=function(e){return function(t){fetch("http://workout.beynum.com/workout/api/workoutsave",{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({workout:a.state.workouts[e]})}).then((function(e){return e.json()})).then((function(e){a.setState((function(e){return{workouts:e.workouts.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{isHidden:!1,isEdit:!1})})),isEditMode:!1}}),(function(){a.props.toast("Workout saved")}))})).catch((function(e){console.warn(e),a.props.toast("Error updating workout",!0)}))}},a.changeName=function(e){return function(t){a.setState((function(s){var a=s.workouts;return{workouts:[].concat(Object(x.a)(a.slice(0,e)),[Object(v.a)(Object(v.a)({},a[e]),{},{name:t.target.value})],Object(x.a)(a.slice(e+1)))}}))}},a.addSet=function(e){return function(t){a.setState((function(t){var s=t.workouts;return{workouts:[].concat(Object(x.a)(s.slice(0,e)),[Object(v.a)(Object(v.a)({},s[e]),{},{sets:[].concat(Object(x.a)(s[e].sets),[{exercise:null,goalReps:0,goalWeight:0,rest:0}])})],Object(x.a)(s.slice(e+1)))}}))}},a.changeExercise=function(e,t){return function(s){var c,i=a.state.exercises.find((function(e){return e.name===s.target.value}));c=i.hasWeight?a.state.workouts[e].sets[t].goalWeight>0?a.state.workouts[e].sets[t].goalWeight:i.hasBar?45:0:0,a.setState((function(s){var n=s.workouts;return{workouts:[].concat(Object(x.a)(n.slice(0,e)),[Object(v.a)(Object(v.a)({},n[e]),{},{sets:[].concat(Object(x.a)(n[e].sets.slice(0,t)),[Object(v.a)(Object(v.a)({},n[e].sets[t]),{},{exercise:i,goalWeight:c},a.getWeights(c,i))],Object(x.a)(n[e].sets.slice(t+1)))})],Object(x.a)(n.slice(e+1)))}}))}},a.editRep=function(e,t,s){a.setState((function(a){var c=a.workouts;return{workouts:[].concat(Object(x.a)(c.slice(0,e)),[Object(v.a)(Object(v.a)({},c[e]),{},{sets:[].concat(Object(x.a)(c[e].sets.slice(0,t)),[Object(v.a)(Object(v.a)({},c[e].sets[t]),{},{goalReps:s})],Object(x.a)(c[e].sets.slice(t+1)))})],Object(x.a)(c.slice(e+1)))}}))},a.editRest=function(e,t,s){a.setState((function(a){var c=a.workouts;return{workouts:[].concat(Object(x.a)(c.slice(0,e)),[Object(v.a)(Object(v.a)({},c[e]),{},{sets:[].concat(Object(x.a)(c[e].sets.slice(0,t)),[Object(v.a)(Object(v.a)({},c[e].sets[t]),{},{rest:s})],Object(x.a)(c[e].sets.slice(t+1)))})],Object(x.a)(c.slice(e+1)))}}))},a.changeWeight=function(e,t,s){var c=a.state.workouts[e].sets[t],i=c.goalWeight+(c["has"+s]?2*s*-1:2*s);a.setState((function(s){var n=s.workouts;return{workouts:[].concat(Object(x.a)(n.slice(0,e)),[Object(v.a)(Object(v.a)({},n[e]),{},{sets:[].concat(Object(x.a)(n[e].sets.slice(0,t)),[Object(v.a)(Object(v.a)(Object(v.a)({},n[e].sets[t]),a.getWeights(i,c.exercise)),{},{goalWeight:i})],Object(x.a)(n[e].sets.slice(t+1)))})],Object(x.a)(n.slice(e+1)))}}))},a.state={isLoading:!0,isEditMode:!1,workouts:[],exercises:[]},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("http://workout.beynum.com/workout/api/workoutload",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){var s=t.workouts.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{activityDays:t.activityDays.reduce((function(e,t){return e[new Date(t).getDay()]+=1,e}),[0,0,0,0,0,0,0]),sets:t.sets.map((function(t){return Object(v.a)(Object(v.a)({},t),e.getWeights(t.goalWeight,t.exercise))}))})}));e.setState({exercises:t.exercises.sort((function(e,t){return e.name>t.name?1:-1})),workouts:s,isLoading:!1})})).catch((function(t){console.warn(t),e.props.toast("Error loading workouts",!0)}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"page workoutPage",children:[Object(a.jsx)("h1",{className:this.state.isEditMode?"hidden":"",children:"My Workouts"}),this.state.isLoading?Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("img",{alt:"Loading",src:m}),Object(a.jsx)("div",{children:"Loading..."})]}):Object(a.jsxs)("div",{className:"workoutCards",children:[this.state.workouts.map((function(t,s){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"workoutCard ".concat(t.isHidden?"":"active"),children:[Object(a.jsxs)("div",{className:"cardContent",children:[Object(a.jsxs)("div",{className:"cardDetails",children:[Object(a.jsx)("div",{className:"cardHeader",children:t.isEdit?Object(a.jsx)("input",{type:"text",value:t.name,onChange:e.changeName(s)}):t.name}),Object(a.jsxs)("div",{className:"cardSubHeader",children:[Object(a.jsx)("div",{className:"label",children:"Last Workout "}),Object(a.jsx)("div",{className:"data",children:t.lastWorkout?t.lastWorkout.toDateString():"Not Started"})]}),Object(a.jsxs)("div",{className:"cardSubHeader",children:[Object(a.jsx)("div",{className:"label",children:"Sets"}),Object(a.jsx)("div",{className:"data",children:t.sets.length}),Object(a.jsx)("div",{className:"label",children:"\xa0\u2022\xa0Reps"}),Object(a.jsx)("div",{className:"data",children:t.sets.reduce((function(e,t){return e+t.goalReps}),0)})]})]}),Object(a.jsx)("div",{className:"cardAction",children:t.isEdit?Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.saveWorkout(s),children:Object(a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"})}):Object(a.jsxs)("div",{className:"actions",children:[Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.props.startActivity.bind(e,t.id),children:Object(a.jsx)("path",{d:"M8 5v14l11-7z"})}),Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.selectWorkout(s),children:Object(a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.deleteWorkout(s),children:Object(a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})]})})]}),Object(a.jsxs)("div",{className:"timelineContainer",children:[Object(a.jsxs)("div",{className:"timelineDate",children:[Object(a.jsx)("div",{className:"timelineCount",children:t.activityDays[0]||"\u2022"}),Object(a.jsx)("div",{className:"timelineDay",children:"Sun"})]}),Object(a.jsxs)("div",{className:"timelineDate",children:[Object(a.jsx)("div",{className:"timelineCount",children:t.activityDays[1]||"\u2022"}),Object(a.jsx)("div",{className:"timelineDay",children:"Mon"})]}),Object(a.jsxs)("div",{className:"timelineDate",children:[Object(a.jsx)("div",{className:"timelineCount",children:t.activityDays[2]||"\u2022"}),Object(a.jsx)("div",{className:"timelineDay",children:"Tue"})]}),Object(a.jsxs)("div",{className:"timelineDate",children:[Object(a.jsx)("div",{className:"timelineCount",children:t.activityDays[3]||"\u2022"}),Object(a.jsx)("div",{className:"timelineDay",children:"Wed"})]}),Object(a.jsxs)("div",{className:"timelineDate",children:[Object(a.jsx)("div",{className:"timelineCount",children:t.activityDays[4]||"\u2022"}),Object(a.jsx)("div",{className:"timelineDay",children:"Thu"})]}),Object(a.jsxs)("div",{className:"timelineDate",children:[Object(a.jsx)("div",{className:"timelineCount",children:t.activityDays[5]||"\u2022"}),Object(a.jsx)("div",{className:"timelineDay",children:"Fri"})]}),Object(a.jsxs)("div",{className:"timelineDate",children:[Object(a.jsx)("div",{className:"timelineCount",children:t.activityDays[6]||"\u2022"}),Object(a.jsx)("div",{className:"timelineDay",children:"Sat"})]})]})]}),Object(a.jsxs)("div",{className:"setsList ".concat(t.isEdit?"active":""),children:[t.sets.map((function(t,c){return Object(a.jsxs)("div",{className:"setContainer",children:[Object(a.jsxs)("div",{className:"setTimeline",children:[Object(a.jsx)("div",{className:"timelineLine ".concat(0===c?"hidden":"")}),Object(a.jsx)("div",{className:"setNumber",children:c+1}),Object(a.jsx)("div",{className:"timelineLine"})]}),Object(a.jsxs)("div",{className:"setDetails",children:[Object(a.jsx)("div",{className:"setName",children:Object(a.jsxs)("select",{value:t.exercise?t.exercise.name:"",onChange:e.changeExercise(s,c),children:[Object(a.jsx)("option",{value:"",children:"Select Exercise"}),e.state.exercises.map((function(e,t){return Object(a.jsx)("option",{value:e.name,children:e.name},t)}))]})}),Object(a.jsxs)("div",{className:"setSettings",children:[Object(a.jsxs)("div",{className:"repsContainer",children:[Object(a.jsxs)("div",{className:"reps",children:[Object(a.jsx)("div",{className:"editButton",onClick:function(){e.editRep(s,c,t.goalReps-1)},children:"-"}),Object(a.jsx)("div",{className:"repsNumber",children:t.goalReps}),Object(a.jsx)("div",{className:"editButton",onClick:function(){e.editRep(s,c,t.goalReps+1)},children:"+"})]}),Object(a.jsx)("div",{children:"Reps"})]}),Object(a.jsxs)("div",{className:"weightContainer ".concat(t.exercise&&t.exercise.hasWeight?"":"hidden"),children:[Object(a.jsxs)("div",{className:"weights",children:[Object(a.jsx)("div",{className:"weight ".concat(t.has45?"active":""," "),onClick:function(){e.changeWeight(s,c,45)},children:"45"}),Object(a.jsx)("div",{className:"weight ".concat(t.has25?"active":""," "),onClick:function(){e.changeWeight(s,c,25)},children:"25"}),Object(a.jsx)("div",{className:"weight ".concat(t.has10?"active":""," "),onClick:function(){e.changeWeight(s,c,10)},children:"10"}),Object(a.jsx)("div",{className:"weight ".concat(t.has5?"active":""," "),onClick:function(){e.changeWeight(s,c,5)},children:"5"}),Object(a.jsx)("div",{className:"weight ".concat(t["has2.5"]?"active":""," "),onClick:function(){e.changeWeight(s,c,2.5)},children:"2.5"})]}),Object(a.jsxs)("div",{children:[t.goalWeight,"lbs"]})]})]}),Object(a.jsxs)("div",{className:"restContainer",children:[Object(a.jsx)("div",{className:"restLine"}),Object(a.jsx)("div",{className:"editButton",onClick:function(){e.editRest(s,c,t.rest-60)},children:"-"}),Object(a.jsx)("div",{className:"restNumber",children:t.rest/60}),Object(a.jsx)("div",{className:"editButton",onClick:function(){e.editRest(s,c,t.rest+60)},children:"+"}),Object(a.jsx)("div",{className:"restLine"})]})]})]},c)})),Object(a.jsx)("div",{className:"setContainer",children:Object(a.jsxs)("div",{className:"setTimeline",children:[Object(a.jsx)("div",{className:"timelineLine"}),Object(a.jsx)("div",{className:"setNumber",style:{cursor:"pointer"},onClick:e.addSet(s),children:"+"})]})})]})]},s)})),Object(a.jsx)("div",{className:"workoutCard ".concat(this.state.isEditMode?"":"active"),children:Object(a.jsx)("div",{className:"addWorkout",onClick:this.addWorkout,children:"+"})})]})]})}}]),s}(i.a.Component)),w=(s(23),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],a.weekNames=[{name:"Sunday",short:"S"},{name:"Monday",short:"M"},{name:"Tuesday",short:"T"},{name:"Wednesday",short:"W"},{name:"Thursday",short:"T"},{name:"Friday",short:"F"},{name:"Saturday",short:"S"}],a.loadMonth=function(e){var t=new Date,s=new Date(a.state.currentMonth.getFullYear(),a.state.currentMonth.getMonth(),1);s=new Date(s.setDate(s.getDate()-s.getDay()-1));var c=new Date(a.state.currentMonth.getFullYear(),a.state.currentMonth.getMonth()+1,1),i=c=new Date(c.setDate(c.getDate()-1));i=new Date(i.setDate(i.getDate()+(6-i.getDay())));var n=Math.ceil((i-s)/1e3/60/60/24/7),r=Array.from({length:n},(function(e,t){return Array.from({length:7},(function(e,t){return new Date(s.setDate(s.getDate()+1))}))}));r=r.map((function(e){return{days:e.map((function(e){return{day:e,isToday:e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}})),isSelected:a.state.selectedWeek}})),a.setState({calendar:r},(function(){return a.setState({selectedWeek:a.state.calendar.findIndex((function(e){return e.days.some((function(e){return e.isToday}))}))})}))},a.changeMonth=function(e){return function(t){var s=a.state.currentMonth;s=new Date(s.setMonth(s.getMonth()+e)),a.setState({currentMonth:s}),a.loadMonth()}},a.selectWeek=function(e){return function(t){a.setState({selectedWeek:e})}},a.state={isLoading:!1,currentMonth:new Date,selectedWeek:0,calendar:[]},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.loadMonth(!0)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"page schedulePage",children:[Object(a.jsx)("h1",{children:"Schedule"}),this.state.isLoading?Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("img",{alt:"Loading",src:m}),Object(a.jsx)("div",{children:"Loading..."})]}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"row monthHeader",children:[Object(a.jsx)("div",{className:"button",onClick:this.changeMonth(-1),children:"<"}),Object(a.jsx)("div",{children:this.monthNames[this.state.currentMonth.getMonth()]+" "+this.state.currentMonth.getFullYear()}),Object(a.jsx)("div",{className:"button",onClick:this.changeMonth(1),children:">"})]}),Object(a.jsxs)("div",{className:"calendar",children:[Object(a.jsx)("div",{className:"row week",children:this.weekNames.map((function(e,t){return Object(a.jsx)("div",{className:"date",children:e.short},t)}))}),this.state.calendar.map((function(t,s){return Object(a.jsx)("div",{className:"row week ".concat(s===e.state.selectedWeek?"weekHighlight":""),onClick:e.selectWeek(s),children:t.days.map((function(t,c){return Object(a.jsx)("div",{className:"date ".concat(t.isToday?"today":""," ").concat(s!==e.state.selectedWeek||0!==c&&6!==c?"":"weekKey"),children:t.day.getDate()},c)}))},s)}))]})]})]})}}]),s}(i.a.Component)),p=(s(24),s.p+"static/media/countdown.958036fa.mp3"),f=s.p+"static/media/getready.75c54146.mp3",k=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).countdownAudio=new Audio(p),a.readyAudio=new Audio(f),a.video={},a.completeSet=function(e){a.state.restInterval&&clearInterval(a.state.restInterval),a.setState((function(t){var s=t.workout;return{workout:Object(v.a)(Object(v.a)({},s),{},{sets:s.sets.map((function(t,s){return Object(v.a)(Object(v.a)({},t),{},{isComplete:s===e||t.isComplete,isRest:s===e})}))}),countDown:{min:e<s.sets.length?Math.floor(s.sets[e].rest/60):0,sec:e<s.sets.length?Math.floor(s.sets[e].rest%60):0,canPlayReady:!0,canPlayCountdown:!0}}}),(function(){var e=setInterval(a.updateTime,1e3);a.setState({restInterval:e}),a.video.play()}))},a.deleteSet=function(e){a.setState((function(t){var s=t.workout;return{workout:Object(v.a)(Object(v.a)({},s),{},{sets:[].concat(Object(x.a)(s.sets.slice(0,e)),Object(x.a)(s.sets.slice(e+1)))})}}))},a.addSet=function(e){var t=a.state.exercises[0],s=Object(v.a)({exercise:t,reps:t.maxReps||0,weight:t.maxWeight||0},a.getWeights(t.maxWeight||0,t));a.setState((function(t){var a=t.workout;return{workout:Object(v.a)(Object(v.a)({},a),{},{sets:[].concat(Object(x.a)(a.sets.slice(0,e+1)),[s],Object(x.a)(a.sets.slice(e+1)))})}}))},a.changeExercise=function(e){return function(t){var s=a.state.exercises.find((function(e){return e.name===t.target.value}));a.setState((function(t){var a=t.workout;return{workout:Object(v.a)(Object(v.a)({},a),{},{sets:[].concat(Object(x.a)(a.sets.slice(0,e)),[Object(v.a)(Object(v.a)({},a.sets[e]),{},{reps:s.maxReps||0,weight:s.maxWeight||0,exercise:s})],Object(x.a)(a.sets.slice(e+1)))})}}))}},a.saveActivity=function(){var e={workoutId:a.state.workout.id,runDate:new Date,sets:a.state.workout.sets.filter((function(e){return e.isComplete})).map((function(e){return{exercise:{id:e.exercise.id,name:e.exercise.name,category:e.exercise.category},reps:e.reps,weight:e.weight}}))};fetch("http://workout.beynum.com/workout/api/activitysave",{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({activity:e})}).then((function(e){return e.json()})).then((function(e){a.props.activityComplete()})).catch((function(e){console.warn(e),a.props.toast("Error updating workout",!0)}))},a.editReps=function(e,t){a.setState((function(s){var a=s.workout;return{workout:Object(v.a)(Object(v.a)({},a),{},{sets:[].concat(Object(x.a)(a.sets.slice(0,e)),[Object(v.a)(Object(v.a)({},a.sets[e]),{},{reps:t})],Object(x.a)(a.sets.slice(e+1)))})}}))},a.editWeight=function(e,t){var s=a.state.workout.sets[e].weight+(a.state.workout.sets[e]["has"+t]?2*t*-1:2*t);a.setState((function(t){var c=t.workout;return{workout:Object(v.a)(Object(v.a)({},c),{},{sets:[].concat(Object(x.a)(c.sets.slice(0,e)),[Object(v.a)(Object(v.a)(Object(v.a)({},c.sets[e]),a.getWeights(s,c.sets[e].exercise)),{},{weight:s})],Object(x.a)(c.sets.slice(e+1)))})}}))},a.getWeights=function(e,t){var s={};return e-=t.hasBar?45:0,s.has45=e>=90,e-=e>=90?90:0,s.has25=e>=50,e-=e>=50?50:0,s.has10=e>=20,e-=e>=20?20:0,s.has5=e>=10,e-=e>=10?10:0,s["has2.5"]=e>=5,e-=e>=5?5:0,s},a.updateTime=function(){var e=a.state.countDown.sec,t=a.state.countDown.min;e>0?e--:t>0&&(t--,e=59),e<=0&&t<=0?(a.state.restInterval&&clearInterval(a.state.restInterval),a.setState((function(e){var t=e.workout;return{workout:Object(v.a)(Object(v.a)({},t),{},{sets:t.sets.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{isRest:!1})}))})}})),a.video.pause()):a.state.countDown.canPlayReady&&t<=0&&e<=30&&e>28?(console.log("ready"),a.readyAudio.play(),a.setState((function(e){var t=e.countDown;return{countDown:Object(v.a)(Object(v.a)({},t),{},{canPlayReady:!1})}}))):a.state.countDown.canPlayCountdown&&t<=0&&e<=3&&(console.log("countdown"),a.countdownAudio.play(),a.setState((function(e){var t=e.countDown;return{countDown:Object(v.a)(Object(v.a)({},t),{},{canPlayCountdown:!1})}}))),a.setState((function(s){var a=s.countDown;return{countDown:Object(v.a)(Object(v.a)({},a),{},{min:t,sec:e})}}))},a.state={isLoading:!0,countDown:{min:0,sec:0},workout:{id:a.props.workoutId}},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("http://workout.beynum.com/workout/api/activityload?id="+this.state.workout.id,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){var s=t.workout,a=t.exercises.map((function(e){var t=Object(x.a)(new Set(e.activities.map((function(e){return+new Date(e.runDateOnly)})))),s=t.map((function(t,s){return{date:new Date(t).getMonth()+1+"/"+new Date(t).getDate(),oneRepMax:e.activities.filter((function(e){return+new Date(e.runDateOnly)===t})).map((function(e){return e.oneRepMax})).sort((function(e,t){return t-e}))[0],setWeights:e.activities.filter((function(e){return+new Date(e.runDateOnly)===t})).map((function(e){return e.weight})),setReps:e.activities.filter((function(e){return+new Date(e.runDateOnly)===t})).map((function(e){return e.reps}))}})),a=350,c=200,i=150,n=45,r=100,o=a/t.length,l={};l.minValue=Math.min.apply(Math,Object(x.a)(s.map((function(e){return e.oneRepMax})))),l.maxValue=Math.max.apply(Math,Object(x.a)(s.map((function(e){return e.oneRepMax})))),l.minGraph=l.minValue-.2*l.minValue,l.maxGraph=l.maxValue+.05*l.maxValue,l.valueHeight=l.maxGraph-l.minGraph;var d=s.map((function(e,t){var i=o*t,n=(l.maxGraph-e.oneRepMax)*c/l.valueHeight,r="";return r=0===t?"M0,":t===s.length-1?"L"+a+",":"L"+(i+o/2)+",",r+=n})).join(" "),h={weight:{}};h.weight.minValue=Math.min.apply(Math,Object(x.a)(s.flatMap((function(e){return e.setWeights})))),h.weight.maxValue=Math.max.apply(Math,Object(x.a)(s.flatMap((function(e){return e.setWeights})))),h.weight.valueHeight=h.weight.maxValue-h.weight.minValue;var u=s.map((function(e,t){return{weights:e.setWeights.map((function(e,s){var a=o*t+o/2-15+5*s,c=e*n/h.weight.maxValue;return"M"+a+","+i+" L"+(a+5)+","+i+" L"+(a+5)+","+(i+c)+" C"+(a+5)+","+(i+c+8)+" "+a+","+(i+c+8)+" "+a+","+(i+c)}))}})).flatMap((function(e){return e.weights}));h.reps={},h.reps.minValue=Math.min.apply(Math,Object(x.a)(s.flatMap((function(e){return e.setReps})))),h.reps.maxValue=Math.max.apply(Math,Object(x.a)(s.flatMap((function(e){return e.setReps})))),h.reps.valueHeight=h.reps.maxValue-h.reps.minValue;var j=s.map((function(t,s){return{reps:t.setReps.map((function(t,a){var c=o*s+o/2-15+5*a,n=t*r/h.reps.maxValue;return"M"+c+","+i+(e.hasWeight?" L"+(c+5)+","+i:" C"+c+","+(i+3)+" "+(c+5)+","+(i+3)+" "+(c+5)+","+i)+" L"+(c+5)+","+(i-n)+" C"+(c+5)+","+(i-n-3)+" "+c+","+(i-n-3)+" "+c+","+(i-n)}))}})).flatMap((function(e){return e.reps}));return Object(v.a)(Object(v.a)({},e),{},{graph:{days:s,weightBars:e.hasWeight?u:[],repBars:j,oneRepMaxPath:e.hasWeight?d:"",oneRepMaxPathFill:e.hasWeight?d+" L"+a+","+c+" L0,"+c:""}})}));s.sets=s.sets.map((function(t){return Object(v.a)(Object(v.a)(Object(v.a)({},t),e.getWeights(t.exercise.maxWeight,t.exercise)),{},{reps:t.exercise.maxReps||0,weight:t.exercise.maxWeight||0,exercise:a.find((function(e){return e.name===t.exercise.name}))})})),e.setState({workout:s,exercises:a,isLoading:!1})}));this.video=document.createElement("video"),this.video.setAttribute("loop","");var t=document.createElement("source");t.src="data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",t.type="video/webm",this.video.appendChild(t);var s=document.createElement("source");s.src="data:video/mp4;AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==",s.type="video/mp4",this.video.appendChild(s)}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"page",children:this.state.isLoading?Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("img",{alt:"Loading",src:m}),Object(a.jsx)("div",{children:"Loading..."})]}):Object(a.jsxs)("div",{className:"pageContainer",children:[Object(a.jsxs)("div",{className:"horizontalContainer",children:[this.state.workout.sets.some((function(e){return e.isComplete}))?Object(a.jsx)("div",{className:"headerButton",children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"workoutAction",onClick:this.saveActivity,children:Object(a.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})})}):"",Object(a.jsxs)("h1",{children:["Workout ",this.state.workout.name]})]}),Object(a.jsx)("div",{className:"setsContainer",children:this.state.workout.sets.map((function(t,s){return Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("div",{className:"setContainer",children:[Object(a.jsxs)("div",{className:"setHeader",children:[Object(a.jsxs)("div",{className:"setNameContainer",children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("select",{value:t.exercise.name,onChange:e.changeExercise(s),children:e.state.exercises.map((function(e,t){return Object(a.jsx)("option",{value:e.name,children:e.name},t)}))})}),Object(a.jsx)("div",{className:"subHeader",children:t.exercise.category})]}),Object(a.jsxs)("div",{className:"setNumberContainer",children:[Object(a.jsx)("div",{children:s+1}),Object(a.jsx)("div",{children:e.state.workout.sets.length})]})]}),Object(a.jsxs)("div",{className:"setDataContainer",children:[Object(a.jsxs)("div",{className:"horizontalContainer",children:[Object(a.jsx)("div",{className:"dataButton",onClick:function(){return e.editReps(s,t.reps-1)},children:"-"}),Object(a.jsx)("div",{className:"dataValue",children:t.reps}),Object(a.jsx)("div",{className:"dataButton",onClick:function(){return e.editReps(s,t.reps+1)},children:"+"})]}),t.exercise.hasWeight?Object(a.jsxs)("div",{className:"horizontalContainer",children:[Object(a.jsx)("div",{className:"weightButton ".concat(t["has2.5"]?"active":""),onClick:function(){return e.editWeight(s,2.5)},children:"2.5"}),Object(a.jsx)("div",{className:"weightButton ".concat(t.has5?"active":""),onClick:function(){return e.editWeight(s,5)},children:"5"}),Object(a.jsx)("div",{className:"weightButton ".concat(t.has10?"active":""),onClick:function(){return e.editWeight(s,10)},children:"10"}),Object(a.jsx)("div",{className:"weightButton ".concat(t.has25?"active":""),onClick:function(){return e.editWeight(s,25)},children:"25"}),Object(a.jsx)("div",{className:"weightButton ".concat(t.has35?"active":""),onClick:function(){return e.editWeight(s,35)},children:"35"}),Object(a.jsx)("div",{className:"weightButton ".concat(t.has45?"active":""),onClick:function(){return e.editWeight(s,45)},children:"45"})]}):"",t.exercise.hasWeight?Object(a.jsx)("div",{className:"horizontalContainer",children:Object(a.jsxs)("div",{className:"subHeader",children:[t.weight," lbs"]})}):""]}),Object(a.jsx)("div",{className:"graphContainer",children:Object(a.jsxs)("svg",{viewBox:"0 0 350 200",className:"workoutGraph",children:[Object(a.jsx)("defs",{children:Object(a.jsxs)("linearGradient",{spreadMethod:"pad",id:"oneRepMaxGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[Object(a.jsx)("stop",{offset:"0%",style:{stopColor:"rgb(255, 255, 255)",stopOpacity:1}}),Object(a.jsx)("stop",{offset:"100%",style:{stopColor:"rgb(202 236 251)",stopOpacity:1}})]})}),t.exercise.graph.oneRepMaxPath?Object(a.jsxs)("g",{children:[Object(a.jsx)("path",{className:"stroke",d:t.exercise.graph.oneRepMaxPath}),Object(a.jsx)("path",{className:"fill",d:t.exercise.graph.oneRepMaxPathFill,fill:"url(#oneRepMaxGradient)"})]}):"",Object(a.jsx)("g",{children:t.exercise.graph.weightBars.map((function(e,t){return Object(a.jsx)("path",{className:"weightBar",d:e},t)}))}),Object(a.jsx)("g",{children:t.exercise.graph.repBars.map((function(e,t){return Object(a.jsx)("path",{className:"repBar",d:e},t)}))})]})}),Object(a.jsxs)("div",{className:"actionContainer",children:[Object(a.jsx)("div",{className:"setActionButton",onClick:function(){return e.completeSet(s)},children:t.isComplete?Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"})}):Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})})}),t.isComplete||t.isRest?Object(a.jsx)("div",{className:"setComplete",children:t.isRest&&e.state.countDown.sec>0?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:(e.state.countDown.min<10?"0":"")+e.state.countDown.min}),Object(a.jsx)("div",{children:(e.state.countDown.sec<10?"0":"")+e.state.countDown.sec})]}):t.isComplete&&!t.isRest?Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})}):""}):"",Object(a.jsx)("div",{className:"setActionButton",onClick:function(){return e.deleteSet(s)},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})]}),Object(a.jsx)("div",{className:"addButton",children:Object(a.jsx)("div",{onClick:function(){return e.addSet(s)},children:"+"})})]},s)}))})]})})}}]),s}(i.a.Component),y=(s(25),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).countdownAudio=new Audio(p),a.readyAudio=new Audio(f),a.video={},a.getWeights=function(e,t){var s={};return e-=t.hasBar?45:0,s.has45=e>=90,e-=e>=90?90:0,s.has25=e>=50,e-=e>=50?50:0,s.has10=e>=20,e-=e>=20?20:0,s.has5=e>=10,e-=e>=10?10:0,s["has2.5"]=e>=5,e-=e>=5?5:0,s},a.startActivity=function(){a.setState((function(e){var t=e.workout;return{activity:{workoutId:a.state.workout.id,runDate:new Date,sets:[],minElapsed:0,secElapsed:0},workout:Object(v.a)(Object(v.a)({},t),{},{sets:[Object(v.a)(Object(v.a)({},t.sets[0]),{},{isActive:!0})].concat(Object(x.a)(t.sets.slice(1)))})}}),(function(){var e=setInterval(a.updateTime,1e3);a.setState({workoutInterval:e})}))},a.startSet=function(e){return function(t){a.setState((function(t){var s=t.workout;return{workout:Object(v.a)(Object(v.a)({},s),{},{sets:s.sets.map((function(t,s){return Object(v.a)(Object(v.a)({},t),{},{isRest:!1,isActive:e===s})}))})}}))}},a.editRep=function(e,t){a.setState((function(s){var a=s.workout;return{workout:Object(v.a)(Object(v.a)({},a),{},{sets:[].concat(Object(x.a)(a.sets.slice(0,e)),[Object(v.a)(Object(v.a)({},a.sets[e]),{},{goalReps:t})],Object(x.a)(a.sets.slice(e+1)))})}}))},a.editWeight=function(e,t){var s=a.state.workout.sets[e],c=s.goalWeight+(s["has"+t]?2*t*-1:2*t);a.setState((function(t){var i=t.workout;return{workout:Object(v.a)(Object(v.a)({},i),{},{sets:[].concat(Object(x.a)(i.sets.slice(0,e)),[Object(v.a)(Object(v.a)({},i.sets[e]),{},{goalWeight:c},a.getWeights(c,s.exercise))],Object(x.a)(i.sets.slice(e+1)))})}}))},a.setComplete=function(e){return function(t){var s=a.state.activity.sets;if(s.some((function(t){return t.id===a.state.workout.sets[e].id}))){var c=s.find((function(t){return t.id===a.state.workout.sets[e].id}));c.reps=a.state.workout.sets[e].goalReps,c.weight=a.state.workout.sets[e].goalWeight}else s.push({id:a.state.workout.sets[e].id,exercise:a.state.workout.sets[e].exercise,reps:a.state.workout.sets[e].goalReps,weight:a.state.workout.sets[e].goalWeight});a.setState((function(t){var a=t.activity,c=t.workout;return{activity:Object(v.a)(Object(v.a)({},a),{},{sets:s}),workout:Object(v.a)(Object(v.a)({},c),{},{sets:[].concat(Object(x.a)(c.sets.slice(0,e)),[Object(v.a)(Object(v.a)({},c.sets[e]),{},{isComplete:!0,isActive:!1,isRest:e<c.sets.length,restMin:e<c.sets.length?Math.floor(c.sets[e].rest/60):0,restSec:e<c.sets.length?Math.floor(c.sets[e].rest%60):0})],Object(x.a)(c.sets.slice(e+1)))}),playReady:!0,playCountdown:!0}})),a.video.play()}},a.deleteSet=function(e){return function(t){a.setState((function(t){var s=t.workout,c=t.activity;return{workout:Object(v.a)(Object(v.a)({},s),{},{sets:s.sets.filter((function(t,s){return s!==e}))}),activity:Object(v.a)(Object(v.a)({},c),{},{sets:c.sets.filter((function(t){return t.id!==a.state.workout.sets[e].id}))})}}))}},a.saveActivity=function(e){fetch("http://workout.beynum.com/workout/api/activitysave",{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({activity:a.state.activity})}).then((function(e){return e.json()})).then((function(e){a.props.activityComplete()})).catch((function(e){console.warn(e),a.props.toast("Error updating workout",!0)}))},a.updateTime=function(){a.setState((function(e){var t=e.activity;return{activity:Object(v.a)(Object(v.a)({},t),{},{minElapsed:Math.floor((Date.now()-a.state.activity.runDate)/1e3/60),secElapsed:Math.floor((Date.now()-a.state.activity.runDate)/1e3%60)})}}));var e=a.state.workout.sets.findIndex((function(e){return e.isRest}));if(e>=0){var t=a.state.workout.sets[e].restMin,s=a.state.workout.sets[e].restSec;s>0?s--:t>0&&(t--,s=59),t<=0&&s<=0?(a.setState((function(t){var s=t.workout;return{workout:Object(v.a)(Object(v.a)({},s),{},{sets:s.sets.map((function(t,s){return Object(v.a)(Object(v.a)({},t),{},{isRest:!1,isActive:s===e+1})}))})}})),a.video.pause()):a.state.playReady&&t<=0&&s<30&&s>=28?(a.readyAudio.play(),a.setState({playReady:!1})):a.state.playCountdown&&t<=0&&s<=3?(a.countdownAudio.play(),a.setState({playCountdown:!1})):a.setState((function(a){var c=a.workout;return{workout:Object(v.a)(Object(v.a)({},c),{},{sets:[].concat(Object(x.a)(c.sets.slice(0,e)),[Object(v.a)(Object(v.a)({},c.sets[e]),{},{restMin:t,restSec:s})],Object(x.a)(c.sets.slice(e+1)))})}}))}},a.state={isLoading:!0,workout:{id:e.workoutId}},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("http://workout.beynum.com/workout/api/activityload?id="+this.state.workout.id,{credentials:"include"}).then((function(e){return e.json()})).then((function(t){var s=t.workout;s.sets=t.workout.sets.map((function(t){return Object(v.a)(Object(v.a)({},t),e.getWeights(t.goalWeight,t.exercise))})),e.setState({workout:s,isLoading:!1})})).catch((function(t){console.warn(t),e.props.toast("Error loading workout",!0)}));this.video=document.createElement("video"),this.video.setAttribute("loop","");var t=document.createElement("source");t.src="data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",t.type="video/webm",this.video.appendChild(t)}},{key:"componentWillUnmount",value:function(){this.state.workoutInterval&&clearInterval(this.state.workoutInterval)}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"page activityPage",children:this.state.isLoading?Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("img",{alt:"Loading",src:m}),Object(a.jsx)("div",{children:"Loading..."})]}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"activityCard",children:[Object(a.jsxs)("div",{className:"cardContent",children:[Object(a.jsx)("div",{className:"cardHeader",children:this.state.workout.name}),Object(a.jsxs)("div",{className:"cardInfo",children:[Object(a.jsx)("div",{children:"time"}),Object(a.jsx)("div",{className:"cardData",children:this.state.activity?this.state.activity.minElapsed+" min "+this.state.activity.secElapsed+" sec":"Not Started"})]}),Object(a.jsxs)("div",{className:"cardInfo",children:[Object(a.jsx)("div",{children:"sets remain"}),Object(a.jsx)("div",{className:"cardData",children:this.state.activity?this.state.workout.sets.length-this.state.activity.sets.length:"Not Started"})]})]}),Object(a.jsx)("div",{className:"cardRemaining",children:this.state.activity&&this.state.activity.sets.length===this.state.workout.sets.length?Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"workoutAction",onClick:this.saveActivity,children:Object(a.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})}):this.state.activity?Object(a.jsxs)("svg",{viewBox:"0 0 42 42",children:[Object(a.jsx)("circle",{className:"setsSegment",cx:"21",cy:"21",r:"15.91549430918954",strokeWidth:"2",strokeDasharray:100-Math.round(this.state.activity.sets.length/this.state.workout.sets.length*100)+" "+Math.round(this.state.activity.sets.length/this.state.workout.sets.length*100),strokeDashoffset:"25"}),Object(a.jsx)("text",{x:"21",y:"26",textAnchor:"middle",children:100-(this.state.activity.sets.length>0?Math.round(this.state.activity.sets.length/this.state.workout.sets.length*100):0)})]}):Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"workoutAction",onClick:this.startActivity,children:Object(a.jsx)("path",{d:"M8 5v14l11-7z"})})})]}),this.state.workout.sets.map((function(t,s){return Object(a.jsxs)("div",{className:"cardContainer",children:[Object(a.jsxs)("div",{className:"setContainer",children:[Object(a.jsxs)("div",{className:"setTimeline",children:[Object(a.jsx)("div",{className:"timelineLine ".concat(0===s?"hidden":"")}),Object(a.jsx)("div",{className:"setNumber",children:s+1}),s<e.state.workout.sets.length-1&&Object(a.jsx)("div",{className:"timelineLine"})]}),t.isActive?Object(a.jsxs)("div",{className:"setCard active",children:[Object(a.jsxs)("div",{className:"setCardContainer",children:[Object(a.jsx)("div",{className:"setNameActive",children:t.exercise.name}),t.maxSet&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"row",children:["max",Object(a.jsx)("div",{className:"cardData",children:t.maxSet?new Date(t.maxSet.runDate).toDateString():""})]}),Object(a.jsxs)("div",{className:"row",children:["reps",Object(a.jsx)("div",{className:"cardData",children:t.maxSet.reps}),t.exercise.hasWeight&&Object(a.jsxs)("div",{className:"row",children:["\xa0weight",Object(a.jsx)("div",{className:"cardData",children:t.maxSet.weight}),"\xa01rm",Object(a.jsx)("div",{className:"cardData",children:t.maxSet.oneRepMax})]})]})]}),Object(a.jsxs)("div",{className:"repsContainerActive",children:[Object(a.jsxs)("div",{className:"repsActive",children:[Object(a.jsx)("div",{className:"editButton",onClick:function(){e.editRep(s,t.goalReps-1)},children:"-"}),Object(a.jsx)("div",{className:"repsNumber",children:t.goalReps}),Object(a.jsx)("div",{className:"editButton",onClick:function(){e.editRep(s,t.goalReps+1)},children:"+"})]}),Object(a.jsx)("div",{children:"Reps"})]}),t.exercise&&t.exercise.hasWeight&&Object(a.jsxs)("div",{className:"weightContainerActive",children:[Object(a.jsxs)("div",{className:"weightsActive",children:[Object(a.jsx)("div",{className:"weightActive ".concat(t.has45?"active":""," "),onClick:function(){e.editWeight(s,45)},children:"45"}),Object(a.jsx)("div",{className:"weightActive ".concat(t.has25?"active":""," "),onClick:function(){e.editWeight(s,25)},children:"25"}),Object(a.jsx)("div",{className:"weightActive ".concat(t.has10?"active":""," "),onClick:function(){e.editWeight(s,10)},children:"10"}),Object(a.jsx)("div",{className:"weightActive ".concat(t.has5?"active":""," "),onClick:function(){e.editWeight(s,5)},children:"5"}),Object(a.jsx)("div",{className:"weightActive ".concat(t["has2.5"]?"active":""," "),onClick:function(){e.editWeight(s,2.5)},children:"2.5"})]}),Object(a.jsx)("div",{className:"weightInfo",children:Object(a.jsxs)("div",{children:["weight ",t.goalWeight," lbs"]})})]})]}),Object(a.jsxs)("div",{className:"setActionActive",children:[Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.setComplete(s),children:Object(a.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})}),Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.deleteSet(s),children:Object(a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})]})]}):Object(a.jsxs)("div",{className:"setCard",children:[Object(a.jsxs)("div",{className:"setCardContainer",children:[Object(a.jsx)("div",{className:"setName",children:t.exercise.name}),Object(a.jsxs)("div",{className:"cardInfo",children:[Object(a.jsx)("div",{children:"reps"}),Object(a.jsx)("div",{className:"cardData",children:e.state.activity&&e.state.activity.sets.length>=s&&e.state.activity.sets.length<s?e.state.activity.sets[s].reps:t.goalReps})]}),t.exercise&&t.exercise.hasWeight&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"cardInfo",children:[Object(a.jsx)("div",{children:"weight"}),Object(a.jsxs)("div",{className:"cardData",children:[e.state.activity&&e.state.activity.sets.length>=s&&e.state.activity.sets.length<s?e.state.activity.sets[s].weight:t.goalWeight," lbs"]})]}),Object(a.jsxs)("div",{className:"cardInfo",children:[Object(a.jsx)("div",{className:"weight ".concat(t.has45?"active":""," "),children:"45"}),Object(a.jsx)("div",{className:"weight ".concat(t.has25?"active":""," "),children:"25"}),Object(a.jsx)("div",{className:"weight ".concat(t.has10?"active":""," "),children:"10"}),Object(a.jsx)("div",{className:"weight ".concat(t.has5?"active":""," "),children:"5"}),Object(a.jsx)("div",{className:"weight ".concat(t["has2.5"]?"active":""," "),children:"2.5"})]})]})]}),Object(a.jsx)("div",{className:"setAction ".concat(t.isComplete?"complete":""),children:t.isComplete?Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.startSet(s),children:Object(a.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})}):e.state.activity?Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:e.startSet(s),children:Object(a.jsx)("path",{d:"M8 5v14l11-7z"})}):Object(a.jsx)("div",{})})]})]}),s<e.state.workout.sets.length-1&&Object(a.jsxs)("div",{className:"setContainer",children:[Object(a.jsxs)("div",{className:"setTimeline",children:[Object(a.jsx)("div",{className:"timelineLine"}),Object(a.jsx)("div",{className:"timeLineRest"}),Object(a.jsx)("div",{className:"timelineLine"})]}),t.isRest?Object(a.jsx)("div",{className:"restContainerActive",children:Object(a.jsx)("div",{className:"restCountdown",children:Object(a.jsxs)("svg",{viewBox:"0 0 42 42",children:[Object(a.jsx)("circle",{className:"restSegment",cx:"21",cy:"21",r:"15.91549430918954",strokeDashoffset:"25",strokeDasharray:Math.round((60*t.restMin+t.restSec)/t.rest*100)+" "+(100-Math.round((60*t.restMin+t.restSec)/t.rest*100))}),Object(a.jsx)("text",{x:"19",y:"25",textAnchor:"end",children:(t.restMin<10?"0":"")+t.restMin}),Object(a.jsx)("text",{x:"21",y:"25",textAnchor:"middle",children:":"}),Object(a.jsx)("text",{x:"23",y:"25",textAnchor:"start",children:(t.restSec<10?"0":"")+t.restSec})]})})}):Object(a.jsxs)("div",{className:"restContainer",children:[Object(a.jsx)("div",{className:"restLine"}),Object(a.jsx)("div",{className:"restNumber",children:t.rest/60}),Object(a.jsx)("div",{className:"restLine"})]})]})]},s)}))]})})}}]),s}(i.a.Component)),N=(s(26),function(e){return Object(a.jsx)("div",{className:"toast ".concat(e.message.isActive?"isActive":""," ").concat(e.message.type),children:e.message.text})}),C=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var c;return Object(o.a)(this,s),(c=t.call(this,e)).showToast=function(e,t){c.setState({toast:{text:e,isActive:!0,type:t?"error":"info"}}),setTimeout((function(){c.setState({toast:{text:"",isActive:!1,type:"info"}})}),4e3)},c.changePage=function(e){if(c.state.isLoggedIn)switch(e){case"home":c.setState({page:Object(a.jsx)(O,{startWorkout:c.startWorkout,toast:c.showToast,user:c.state.user})});break;case"workout":c.setState({page:Object(a.jsx)(g,{startActivity:c.startActivity,toast:c.showToast})});break;case"workoutactivity":c.setState({page:Object(a.jsx)(k,{workoutId:c.state.currentWorkout,activityComplete:c.activityComplete,toast:c.showToast})});break;case"activity":c.setState({page:Object(a.jsx)(y,{workoutId:c.state.currentWorkout,activityComplete:c.activityComplete,toast:c.showToast})});break;case"schedule":c.setState({page:Object(a.jsx)(w,{toast:c.showToast})})}},c.startActivity=function(e){c.setState((function(){return{currentWorkout:e}}),(function(){c.changePage("activity")}))},c.startWorkout=function(e){c.setState({currentWorkout:e},(function(){c.changePage("workoutactivity")}))},c.activityComplete=function(){c.setState((function(){return{currentWorkout:null}}),(function(){c.changePage("home")}))},c.state={isLoading:!0,isLoggedIn:!1,currentWorkout:null,toast:{text:"",isActive:!1,type:"info"}},c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("http://workout.beynum.com/workout/api/appload",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){e.setState({isLoggedIn:t.loggedIn,user:t.user,page:t.loggedIn?Object(a.jsx)(O,{startWorkout:e.startWorkout,toast:e.showToast,user:t.user}):Object(a.jsx)(j,{toast:e.showToast}),isLoading:!1})}))}},{key:"componentDidCatch",value:function(e,t){fetch("http://workout.beynum.com/workout/api/errorsave",{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({error:{error:e,info:t}})})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"pageContainer",children:[this.state.isLoading?Object(a.jsx)("div",{children:"Loading"}):this.state.page,this.state.isLoggedIn?Object(a.jsx)(b,{changePage:this.changePage}):null,Object(a.jsx)(N,{message:this.state.toast})]})}}]),s}(i.a.Component);r.a.render(Object(a.jsx)(C,{}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.10b25916.chunk.js.map